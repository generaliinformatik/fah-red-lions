language: python
cache: pip

env:
- FAH_TEAMID=263581
- FAH_LIMITDAYS=14
- FAH_MILESTONE1=10000
- FAH_MILESTONE2=5000
- FAH_MILESTONE3=1000
- FAH_GOAL=150
- FAH_EMAIL_SERVER=
- FAH_EMAIL_PORT=
- FAH_EMAIL_FROM=
- FAH_EMAIL_TO=""
- FAH_EMAIL_PASSWORD=
- FAH_PUSHRANK_TIME=0800
- FAH_PUSHRANK_CHANGE=0
- FAH_PUSHRANK_FORCE=0

python:
- 3.7

install :
- pip install pre-commit
- pip install flake8
- pip install black
- pip install codecov
- pip install coverage

before_script:
 # stop the build if there are Python syntax errors or undefined names
- flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
 # exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
- flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics

script:
#- true  # add other tests here
- flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics
- black .
- pre-commit run --all-files
- coverage run app/folding-stats.py

notifications:
 on_success: change
 on_failure: change  # `always` will be the setting once code changes slow down

# command to run tests
after_success:
#sudo: required
- bash <(curl -s https://codecov.io/bash) || echo 'Codecov failed to upload'
